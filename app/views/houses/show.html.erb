<div class="row">
  <div class="span6">
    <h1><%= @house.title %></h1>
    <div id="map_canvas">
      <%= render 'google_map_directions' %>
    </div>

    <div id="house-carousel" class="carousel slide">
      <!-- Carousel items -->
      <div class="carousel-inner">
        <% @house.assets.each_with_index do |asset, index| %>
          <div class="item <%if index == 0%>active<%end%>">
            <%= image_tag asset.image_url.to_s,
                          :width => "378",
                          :height => "248" %>
          </div>
        <% end %>
      </div>
      <!-- Carousel nav -->
      <a class="carousel-control left" href= "#house-carousel"  data-slide="prev">&lsaquo;</a>
      <a class="carousel-control right" href= "#house-carousel"  data-slide="next">&rsaquo;</a>
    </div>

  </div>

  <div class="span6">
    <h2>About This House</h2>
    <p><%= @house.description %></p>

    <div class="pull-right price-and-button">
      <span class="total-cost"><%= number_to_currency(@house.total_cost) %></span>

      <br />

      <% unless current_user.commitment || @house.full? %>
        <%= link_to "Join House",
                      "/houses/#{@house.id}/commitments/create",
                      :method => :post,
                      :class => "btn btn-success btn-default details" %>
      <% end %>

      <% if (current_user.commitment &&
             current_user.commitment.house_id == @house.id &&
             !current_user.house.full?) %>
                <%= link_to "Leave House",
                            "/houses/#{@house.id}/commitments/#{current_user.commitment.id}",
                            :method => :delete,
                            :class => "btn btn-danger btn-default details" %>
      <% end %>
    </div>

    <h3>Details</h3>
    <div id="houses-show-details">
      <div class="row alt">
        <div class="span6"><span id="address"><p><%= @house.address %></p></span></div>
      </div>
      <div class="row">
        <div class="span2">
          <strong>rooms: </strong><span class="pull-right"><%= @house.rooms %></span>
        </div>
        <div class="span2">
          &nbsp;
        </div>
        <div class="span2">
          <strong>beds: </strong><span class="pull-right"><%= @house.beds %></span>
        </div>
      </div>
      <div class="row alt">
        <div class="span2">
          <strong>capacity: </strong><span class="pull-right"><%= @house.capacity %></span>
        </div>
        <div class="span2">
          &nbsp;
        </div>
        <div class="span2">
          <strong>bath: </strong><span class="pull-right"><%= @house.bathrooms %></span>
        </div>
      </div>
    </div>

    <h3>Committed Roommates</h3>

    <div class="row">
      <% unless @roommates == nil %>
      <% @roommates.each_with_index do |roommate, index| %>
        <div class="span2">
          <div class="roommate-pics">
            <%= image_tag "http://graph.facebook.com/#{roommate.uid}/picture?type=large",
                          :width => "145",
                          :height => "145",
                          :class => "roommate-headshot" %>
          </div>
        </div>
        <div class="span2">
          <div class="roommate-pics">
            <img alt="Picture?type=large" class="roommate-headshot" height="145" src="http://graph.facebook.com/702180352/picture?type=large" width="145" />
          </div>
        </div>
      <% end %>
      <% end %>
    </div>

    <div class="row">
      <div class="span6">
        <%= render 'facebook_comments' %>
      </div>
    </div>
  </div>
</div>

